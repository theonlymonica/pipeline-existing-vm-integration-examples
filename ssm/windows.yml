schemaVersion: "2.2"
description: "Example document"
parameters:
  Message:
    type: "String"
    description: "Message to write"
    default: "Hello World"
  OutputBucket:
    type: "String"
    description: "Bucket to save output"
mainSteps:
  - action: "aws:runPowerShellScript"
    name: "example"
    precondition:
      StringEquals:
        - platformType
        - Windows
    inputs:
      timeoutSeconds: "60"
      runCommand:
        - Start-Sleep -Seconds 10
        - Import-Module AWSPowerShell
        - $fname = $(((get-date).ToUniversalTime()).ToString("yyyyMMddTHHmmssZ"))
        - "Write-S3Object -BucketName {{OutputBucket}} -Key ($fname + '.txt') -Content {{Message}}"
